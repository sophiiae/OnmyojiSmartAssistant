# Onmyoji Smart Assistant (OSA) 

## 📖 项目简介

OSA是一个阴阳师智能小助手，提供图形界面配置编辑和脚本运行功能。支持多种游戏任务的自动化，包括日常任务、探索、御魂、结界突破等。

### Credits
主要参考 [OnmyojiAutoScript](https://github.com/runhey/OnmyojiAutoScript).

## 🚀 快速开始

### 方式一：使用可执行文件（推荐）
1. 双击 `osa.exe` 启动程序
2. 在图形界面中配置游戏参数
3. 点击"运行"按钮开始自动化

### 方式二：使用Python脚本
1. 确保已安装Python环境
2. 运行 `python -m config_editor.main`
3. 在图形界面中配置和运行

## 📋 详细用户手册

### 1. 环境准备

#### 1.1 安装Python环境
- **下载Python**: 访问 [python.org](https://www.python.org/downloads/) 下载Python 3.8+
- **安装要求**: 
  - 选择"Add Python to PATH"
  - 勾选"pip"和"py launcher"
- **验证安装**: 打开命令提示符，输入 `python --version`

#### 1.2 安装MuMu模拟器
- **下载MuMu**: 从官网下载MuMu12模拟器
- **安装要求**:
  - 建议安装在默认路径
  - 开启ADB调试功能
  - 设置合适的分辨率（推荐1920x1080）

#### 1.3 安装阴阳师
- 在MuMu模拟器中安装阴阳师游戏
- 确保游戏能正常运行
- 建议使用官方版本

### 2. 项目安装

#### 2.1 下载项目
# 方式一：Git克隆
```
git clone https://github.com/your-repo/onmyoji-sa.git
```

```
cd onmyoji-sa
```

# 方式二：直接下载ZIP文件
# 解压到本地目录

#### 2.2 安装依赖
# 创建虚拟环境
```
python -m venv venv
```

# 激活虚拟环境
# Windows:
```
.\venv\Scripts\activate
```

# 安装依赖包
```
pip install -r requirements.txt
```


### 3. 启动配置编辑器
```bash
python -m config_editor.main
```

### 4. 配置脚本
1. 在配置编辑器中设置各项参数
2. 保存配置文件
3. 点击运行按钮开始执行

## 详细使用说明

### 环境配置

#### 1. 模拟器设置
- 推荐使用 MuMu 模拟器
- 分辨率设置为 1280x720, dpi 240
- 确保 ADB 连接正常
- 配置游戏账号信息

#### 2. 游戏设置
- 进入阴阳师游戏
- 确保账号已登录
- 关闭游戏内的自动战斗功能

#### 3. 脚本配置
- 打开配置编辑器
- 根据需要启用相应功能
- 设置合适的执行时间

## 配置文件

配置文件位于 `configs/` 目录下，支持多个配置文件：

- `osa.json` - 默认配置文件(不显示在程序里，建议保留)
- 其他自定义配置文件

## 注意事项

1. **游戏版本兼容性**
   - 确保游戏版本与脚本兼容
   - 更新游戏后可能需要重新配置

2. **网络连接**
   - 确保网络连接稳定
   - 避免在网络不稳定时运行

3. **资源管理**
   - 定期清理游戏缓存
   - 确保设备有足够存储空间

4. **安全提醒**
   - 仅用于个人游戏辅助
   - 遵守游戏服务条款
   - 不建议长时间连续运行

## 故障排除

### 常见问题

1. **模拟器连接失败**
   - 检查模拟器是否正常运行
   - 确认 ADB 端口设置正确
   - 重启模拟器和脚本

2. **游戏识别失败**
   - 检查游戏分辨率设置
   - 确认游戏界面正常显示
   - 尝试重新截图
   - 验证图像识别文件

3. **任务执行异常**
   - 检查网络连接
   - 确认游戏界面无弹窗
   - 重启脚本
   - 查看详细错误信息

### 日志查看

脚本运行时会生成详细日志：
- `logs/game_debug.log` - 调试日志
- `logs/game_errors.log` - 错误日志

## 开发说明

### 项目结构
```
onmyoji-sa/
├── config_editor/          # 配置编辑器
├── module/                 # 核心模块
├── tasks/                  # 任务模块
├── configs/                # 配置文件
├── logs/                   # 日志文件
└── deploy/                 # 部署文件
```

### 添加新功能
1. 在 `tasks/` 目录下创建新任务
2. 在配置编辑器中添加相应配置项
3. 更新文档和说明

## 📄 许可证

本项目仅供学习和研究使用，请遵守相关法律法规和游戏服务条款。

## 📞 技术支持

- **问题反馈**: 提交Bug Issue（最好有详细log和错误截图）
- **功能建议**: 提交Feature Request Issue
- **使用交流**: 加入用户交流群（暂不支持）

## 贡献

欢迎提交 Issue 和 Pull Request 来改进项目。
